set -g default-terminal "tmux-256color"
set -as terminal-overrides ",*:Tc"
set -g mouse on
set -g history-limit 100000
set -sg escape-time 3
set -g base-index 1
bind -r ^ last-window

unbind r
bind r source-file ~/.tmux.conf

set -g prefix C-s

bind-key x kill-pane

# act like vim
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'pbcopy'
## move around b/w panes
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
## resize panes
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5
## split windows in current directory
bind-key v split-window -h -c "#{pane_current_path}"
bind-key s split-window -v -c "#{pane_current_path}"

# Convenience keys
bind-key S choose-tree -s  # capital S for session picker to avoid default prefix match
bind-key W choose-tree -w  # capital W for window picker across all sessions
# bind-key N command-prompt -p "New session name:" "new-session -d -s '%%' -c '#{pane_current_path}'; switch-client -t '%%'"
bind-key N command-prompt -p "New session name:" "new-session -d -s '%1' -c '#{pane_current_path}'; switch-client -t '%1'"

# list of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'dracula/tmux'

# dracula
set -g @dracula-show-left-icon session
set -g @dracula-plugins "git cpu-usage ram-usage weather"
set -g @dracula-fixed-location "Montreal"
set -g @dracula-show-fahrenheit false
set -g @dracula-show-powerline true
set -g @dracula-show-flags true
set -g status-position top

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

# Henri's tmux Cheatsheet

# Prefix: Ctrl-s

# SESSIONS
# tmux new -s name          # create named session (outside tmux)
# Ctrl-s d                  # detach from session
# Ctrl-s S                  # session picker (kill with x→y, bulk with t→X→y)
# Ctrl-s $                  # rename current session
# Ctrl-s N                  # create new session at current directory (custom)
# Ctrl-s : attach -c "#{pane_current_path}"  # change session base dir

# WINDOWS
# Ctrl-s c                  # create new window
# Ctrl-s ,                  # rename window
# Ctrl-s 1,2,3...           # jump to window by number
# Ctrl-s n/p                # next/previous window
# Ctrl-s ^                  # last window
# Ctrl-s w                  # window picker (kill with x→y, bulk with t→X→y)

# PANES
# Ctrl-s v                  # split vertical
# Ctrl-s s                  # split horizontal
# Ctrl-s h/j/k/l            # move between panes (vim-style)
# Ctrl-s H/J/K/L            # resize panes
# Ctrl-s x                  # kill pane (with confirmation)

# COPY MODE (for copying command output)
# Ctrl-s [                  # enter copy mode
# v                         # start selection
# y                         # copy to clipboard & exit
# / or ?                    # search forward/backward
# g/G                       # top/bottom of buffer
# Escape/q                  # exit copy mode

# OTHER
# Ctrl-s :                  # command mode
# Ctrl-s r                  # reload config
