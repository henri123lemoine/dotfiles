set -g default-terminal "tmux-256color"
set -as terminal-overrides ",*:Tc"
set -g mouse on
set -g history-limit 100000
set -sg escape-time 10
set -g display-time 4000
set -g status-interval 5
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g focus-events on
set -g set-clipboard on
bind -r ^ last-window

# # Material Darker color scheme for tmux
# # Colors match WezTerm's Material Darker (base16) theme

# # Base colors (Material Darker palette)
# set -g default-terminal "screen-256color"
# set -ga terminal-overrides ",xterm-256color:Tc"

# # Status bar colors
# set -g status-bg "#212121"
# set -g status-fg "#EEFFFF"

# # Window status colors
# set -g window-status-current-style "bg=#80CBC4,fg=#212121,bold"
# set -g window-status-style "bg=#212121,fg=#EEFFFF"

# # Pane border colors
# set -g pane-border-style "fg=#424242"
# set -g pane-active-border-style "fg=#80CBC4"

# # Message colors
# set -g message-style "bg=#80CBC4,fg=#212121"
# set -g message-command-style "bg=#80CBC4,fg=#212121"

# # Clock mode
# set -g clock-mode-colour "#80CBC4"

# # Copy mode highlighting
# set -g mode-style "bg=#80CBC4,fg=#212121"

bind R source-file ~/.config/tmux/tmux.conf

set -g prefix C-a

# Pane / Window / Session management
bind-key x kill-pane
## move around b/w panes (vim-style)
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
## resize panes
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5
## split windows in current directory
bind-key - split-window -v -c "#{pane_current_path}"
bind-key | split-window -h -c "#{pane_current_path}"

# Copy mode - EASY ACCESS
bind-key [ copy-mode
bind-key ] paste-buffer

## Session fuzzy finder
bind-key f display-popup -w 50% -h 50% -E "sh -lc 'sel=\$(tmux list-sessions -F \"#{session_name}\" | fzf --height=100% --layout=reverse --prompt=\"Session > \"); [ -n \"\$sel\" ] && tmux switch-client -t \"\$sel\"'"

# Display Popups
bind C-a display-popup \
  -d "#{pane_current_path}" \
  -E "zsh"

bind C-z display-popup \
  -w 80% \
  -h 80% \
  -E "nvim ~/.zshrc"

bind C-p display-popup -E "python3"

bind-key C display-popup -E "bash -i -c \"read -p \\\"Session name: \\\" name; tmux new-session -d -c '#{pane_current_path}' -s \\\$name && tmux switch-client -t \\\$name\""

bind-key l display-popup \
  -d "#{pane_current_path}" \
  -w 80% \
  -h 80% \
  -E "lazygit"

bind C-c display-popup -E "bash -i ~/.tmux/scripts/llm/chat-popup.sh"

bind C-v display-popup \
  -w 80% \
  -h 80% \
  -E "rmpc"

# Copy mode (act like vim)
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'pbcopy'
bind -T copy-mode-vi r send-keys -X rectangle-toggle
bind -T copy-mode-vi Escape send-keys -X cancel

# list of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'dracula/tmux'

# dracula
set -g @dracula-show-left-icon session
set -g @dracula-plugins "git"
set -g @dracula-show-fahrenheit false
set -g @dracula-show-powerline true
set -g @dracula-show-flags true
set -g status-position top

# tmux resurrect
set -g @resurrect-strategy-nvim 'session'
set -g @resurrect-capture-pane-contents 'on'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

# Henri's tmux Cheatsheet

# Prefix: Ctrl-a

# SESSIONS
# tmux new -s name          # create named session (outside tmux)
# Ctrl-a d                  # detach from session
# Ctrl-a s                  # session picker (kill with x→y, bulk with t→X→y)
# Ctrl-a $                  # rename current session
# Ctrl-a C                  # create new session at current directory (custom)
# Ctrl-a P / N              # switch to previous/next session
# Ctrl-a : attach -c "#{pane_current_path}"  # change session base dir

# WINDOWS
# Ctrl-a c                  # create new window
# Ctrl-a ,                  # rename window
# Ctrl-a 1,2,3...           # jump to window by number
# Ctrl-a n/p                # next/previous window
# Ctrl-a ^                  # last window
# Ctrl-a w                  # window picker (kill with x→y, bulk with t→X→y)

# PANES
# Ctrl-a -                  # split vertical (horizontal line = top/bottom)
# Ctrl-a |                  # split horizontal (vertical line = left/right)
# Ctrl-a h/j/k/l            # move between panes (vim-style)
# Ctrl-a H/J/K/L            # resize panes
# Ctrl-a x                  # kill pane (with confirmation)

# COPY MODE (for copying command output)
# Ctrl-a [                  # enter copy mode
# v                         # start selection
# y                         # copy to clipboard & exit
# / or ?                    # search forward/backward
# g/G                       # top/bottom of buffer
# Escape/q                  # exit copy mode

# OTHER
# Ctrl-a :                  # command mode
# Ctrl-a R                  # reload config
# Ctrl-a f		    # fuzzy finder
